import 'ts-polyfill';
import React from 'react';
import ReactDOM from 'react-dom';

import 'styles/index.css';
import { decompress } from 'utilities/compress';
import Root from 'components';

if (window.__SSD) {
  const { initState, gData } = eval('(' + decompress(window.__SSD) + ')');

  ReactDOM.hydrate(
    <Root initState={initState} gData={gData} />,
    document.getElementById('root'),
    () => {
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sf/sw.js');
        });
      }
    },
  );
}
